<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#0f1220" />
    <link rel="manifest" href="manifest.webmanifest" />
    <title>Admin</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <section class="card active">
        <div class="top-tools">
          <a href="./" class="mini-link">← Zur Auswahl</a>
          <button id="refreshAdminBtn" class="hidden">Neu laden</button>
        </div>

        <h1>Admin Dashboard</h1>
        <p class="admin-page-subtitle">Manage Moderation, Logs und Aktivität</p>
        <div id="adminLoginBox" class="admin-box">
          <p class="subtitle">Zugriff nur mit Admin-Key</p>
          <label for="adminKeyInput">Admin Access Key</label>
          <input id="adminKeyInput" type="password" placeholder="Admin-Key eingeben" autocomplete="off" />
          <div class="stack">
            <button id="adminLoginBtn">Einloggen</button>
            <button id="adminLogoutBtn" class="mini-btn" type="button">Logout</button>
          </div>
          <p id="adminInfo" class="subtitle"></p>
        </div>

        <div id="adminPanel" class="hidden">
          <div class="admin-shell">
            <div class="admin-welcome">
              <h3>Willkommen zurück</h3>
              <p>Wähle unten einen Bereich aus.</p>
            </div>
            <div class="admin-grid">
              <article class="admin-tile">
                <h4>Scrims</h4>
                <p>Letzte Matches und Runden</p>
                <button class="admin-nav-btn" data-target="matchSection" type="button">Manage Scrims</button>
              </article>
              <article class="admin-tile">
                <h4>Moderation</h4>
                <p>Ban/Mute Commands ausführen</p>
                <button class="admin-nav-btn" data-target="commandSection" type="button">Manage Moderation</button>
              </article>
              <article class="admin-tile">
                <h4>Activity</h4>
                <p>Mitglieder und Online-Status</p>
                <button class="admin-nav-btn" data-target="memberSection" type="button">View Activity</button>
              </article>
              <article class="admin-tile">
                <h4>Statistics</h4>
                <p>Übersicht und Kennzahlen</p>
                <button class="admin-nav-btn" data-target="summarySection" type="button">View Statistics</button>
              </article>
              <article class="admin-tile">
                <h4>Logs</h4>
                <p>Moderation-Aktionen prüfen</p>
                <button class="admin-nav-btn" data-target="moderationSection" type="button">View Logs</button>
              </article>
              <article class="admin-tile">
                <h4>Account Security</h4>
                <p>Access-Codes verwalten</p>
                <button class="admin-nav-btn" data-target="accessSection" type="button">Manage Sessions</button>
              </article>
            </div>
          </div>

          <div id="summarySection" class="stats-box">
            <h4>Übersicht</h4>
            <ul id="summaryList"></ul>
          </div>

          <div id="commandSection" class="admin-box hidden">
            <h3>Channel Manager</h3>
            <p class="subtitle">Befehle: *ban, *unban, *mute, *unmute, *md</p>
            <label for="commandInput">Command</label>
            <input id="commandInput" type="text" placeholder="*ban fp_xxx griefing 120" autocomplete="off" />
            <div class="stack">
              <button id="runCommandBtn">Command ausführen</button>
            </div>
            <p id="commandInfo" class="subtitle"></p>
          </div>

          <div id="memberSection" class="player-list-wrap">
            <h3>Mitglieder (Registriert & Aktivität)</h3>
            <ul id="memberList" class="player-list"></ul>
          </div>

          <div id="moderationSection" class="player-list-wrap">
            <h3>Moderation Log</h3>
            <ul id="moderationList" class="player-list"></ul>
          </div>

          <div class="player-list-wrap">
            <h3>Aktive Bans</h3>
            <ul id="banList" class="player-list"></ul>
          </div>

          <div class="player-list-wrap">
            <h3>Aktive Mutes</h3>
            <ul id="muteList" class="player-list"></ul>
          </div>

          <div id="matchSection" class="player-list-wrap">
            <h3>Zuletzt gespielte Matches</h3>
            <ul id="matchList" class="player-list"></ul>
          </div>

          <div id="accessBox" class="admin-box hidden">
            <h3>Access vergeben</h3>
            <label for="grantLabel">Name/Label</label>
            <input id="grantLabel" type="text" value="Teammate" maxlength="40" />

            <label for="grantRole">Rolle</label>
            <select id="grantRole">
              <option value="viewer">viewer (nur lesen)</option>
              <option value="editor">editor (ban/mute)</option>
            </select>

            <label for="grantHours">Laufzeit in Stunden</label>
            <input id="grantHours" type="number" min="1" max="8760" value="72" />

            <button id="grantAccessBtn">Access Code erstellen</button>
            <p id="grantInfo" class="subtitle"></p>
          </div>
        </div>
      </section>
    </main>

    <script src="pwa.js"></script>
    <script src="admin.js"></script>
  </body>
</html>
