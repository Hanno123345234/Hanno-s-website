<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game Selection</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <section class="card active">
        <h1 id="titleText">Choose Game</h1>
        <p id="subtitleText" class="subtitle">Pick your mode</p>

        <div class="lang-row">
          <label for="langSelect" id="langLabel">Language</label>
          <select id="langSelect" aria-label="Select language">
            <option value="en">English</option>
          </select>
        </div>

        <div class="stack">
          <a id="truthLink" class="mode-link" href="/truth.html">Truth or Dare</a>
          <a id="amongLink" class="mode-link" href="/amongus.html">Among Us Mode</a>
        </div>
      </section>
    </main>

    <script>
      const LANGUAGE_KEY = "app_lang_v1";
      const translations = {
        en: {
          title: "Choose Game",
          subtitle: "Pick your mode",
          label: "Language",
          truth: "Truth or Dare",
          among: "Among Us Mode"
        }
      };

      const titleText = document.getElementById("titleText");
      const subtitleText = document.getElementById("subtitleText");
      const langLabel = document.getElementById("langLabel");
      const langSelect = document.getElementById("langSelect");
      const truthLink = document.getElementById("truthLink");
      const amongLink = document.getElementById("amongLink");

      function getInitialLang() {
        return "en";
      }

      function updateModeLinks(lang) {
        truthLink.href = `/truth.html?lang=${encodeURIComponent(lang)}`;
        amongLink.href = `/amongus.html?lang=${encodeURIComponent(lang)}`;
      }

      function applyLanguage(lang) {
        const t = translations.en;
        titleText.textContent = t.title;
        subtitleText.textContent = t.subtitle;
        langLabel.textContent = t.label;
        truthLink.textContent = t.truth;
        amongLink.textContent = t.among;
        document.documentElement.lang = lang;
        langSelect.value = lang;
        window.localStorage.setItem(LANGUAGE_KEY, lang);
        updateModeLinks(lang);
      }

      langSelect.addEventListener("change", () => {
        applyLanguage("en");
      });

      applyLanguage(getInitialLang());
    </script>
  </body>
</html>