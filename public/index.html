<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#0f1220" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <title>Spielauswahl</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <section class="card active">
        <p class="subtitle">Gemacht von Hanno</p>
        <h1 id="titleText">Spiel wählen</h1>
        <p id="subtitleText" class="subtitle">Wähle deinen Modus</p>

        <div class="lang-row">
          <label for="langSelect" id="langLabel">Sprache</label>
          <select id="langSelect" aria-label="Sprache auswählen">
            <option value="de">Deutsch</option>
          </select>
        </div>

        <div class="stack">
          <a id="impostorLink" class="mode-link" href="/impostor.html">Impostor Pro</a>
          <a id="amongLink" class="mode-link" href="/amongus.html">Among Us Modus</a>
          <a class="mode-link" href="/stats.html">Stats Dashboard</a>
          <a class="mode-link" href="/admin.html">Admin Dashboard</a>
          <a class="mode-link" href="/join-logs.html">Join Logs</a>
        </div>
      </section>
    </main>

    <script src="pwa.js"></script>

    <script>
      const LANGUAGE_KEY = "app_lang_v1";
      const translations = {
        de: {
          title: "Spiel wählen",
          subtitle: "Wähle deinen Modus",
          label: "Sprache",
          impostor: "Impostor Pro",
          among: "Among Us Modus"
        }
      };

      const titleText = document.getElementById("titleText");
      const subtitleText = document.getElementById("subtitleText");
      const langLabel = document.getElementById("langLabel");
      const langSelect = document.getElementById("langSelect");
      const impostorLink = document.getElementById("impostorLink");
      const amongLink = document.getElementById("amongLink");

      function getInitialLang() {
        return "de";
      }

      function updateModeLinks(lang) {
        impostorLink.href = `/impostor.html?lang=${encodeURIComponent(lang)}`;
        amongLink.href = `/amongus.html?lang=${encodeURIComponent(lang)}`;
      }

      function applyLanguage(lang) {
        const t = translations.de;
        titleText.textContent = t.title;
        subtitleText.textContent = t.subtitle;
        langLabel.textContent = t.label;
        impostorLink.textContent = t.impostor;
        amongLink.textContent = t.among;
        document.documentElement.lang = lang;
        langSelect.value = lang;
        window.localStorage.setItem(LANGUAGE_KEY, lang);
        updateModeLinks(lang);
      }

      langSelect.addEventListener("change", () => {
        applyLanguage("de");
      });

      applyLanguage(getInitialLang());
    </script>
  </body>
</html>